---
title: "Full Platform Self-Hosting"
description: "Deploy the complete Traceloop platform in your infrastructure"
---

The Full Platform deployment provides complete control over the entire Traceloop stack, perfect for organizations with strict security requirements or air-gapped environments.

## Infrastructure Requirements

### Core Components

1. **ClickHouse Database**

   - [ClickHouse Cloud](https://clickhouse.cloud)
   - [Self-hosted ClickHouse](https://clickhouse.com/docs/en/install)

2. **Kafka Message Queue**

   - [Confluent Cloud](https://confluent.cloud)
   - [Amazon MSK](https://aws.amazon.com/msk/)
   - [Apache Kafka](https://kafka.apache.org/quickstart)

3. **PostgreSQL Database**

   - [Amazon Aurora PostgreSQL](https://aws.amazon.com/rds/aurora/postgresql-features/)
   - [Azure Database for PostgreSQL](https://azure.microsoft.com/en-us/products/postgresql/)
   - [PostgreSQL](https://www.postgresql.org/download/)

4. **Kubernetes Cluster**
   - [Amazon EKS](https://aws.amazon.com/eks/)
   - [Google GKE](https://cloud.google.com/kubernetes-engine)
   - [Azure AKS](https://azure.microsoft.com/en-us/products/kubernetes-service)
   - Any Helm-compatible Kubernetes distribution

## Deployment Process


### 1. Configure Namespace

```bash
# Create Traceloop namespace
kubectl create namespace traceloop
```

### 2. Create required secrets under traceloop namespace

#### Docker Hub image pull secret
```bash
kubectl create secret docker-registry regcred \
  --namespace traceloop \
  --docker-server=docker.io \
  --docker-username=<dockerhub-username-provided-by-traceloop> \
  --docker-password=<dockerhub-password-provided-by-traceloop>
```
#### Postges Sccret (if not already present)
```bash
kubectl create secret generic traceloop-postgres-secret \
  --namespace traceloop \
  --from-literal=POSTGRES_DATABASE_USERNAME=<postgres-username> \
  --from-literal=POSTGRES_DATABASE_PASSWORD=<postgres-password>
```

#### ClickHouse Secret (if not already present)
```bash
kubectl create secret generic traceloop-clickhouse-secret \
  --namespace traceloop \
  --from-literal=CLICKHOUSE_USERNAME=<clickhouse-username> \
  --from-literal=CLICKHOUSE_PASSWORD=<clickhouse-password>
```

#### Kafka Secret (if not already present)
```bash
kubectl create secret generic traceloop-kafka-secret \
  --namespace traceloop \
  --from-literal=KAFKA_API_KEY=<kafka-api-key> \
  --from-literal=KAFKA_API_SECRET=<kafka-api-secret>
```
### 3. Pull Traceloop helm chart on your desired location

```bash
# Add Traceloop Helm repository
helm pull oci://registry-1.docker.io/traceloop/helm
```

### 4. Unzip and run subcharts extractions script

```bash
unzip traceloop-helm-chart.zip
chmod +x extract-subcharts.sh
./extract-subcharts.sh
```

### 5. Update `values-customer.yaml` with your domain & auth configuration:

```yaml
kong-gateway:
  service:
    type: NodePort # Or ClusterIP
    proxy:
      # port: 8000
      # targetPort: 8000
      nodePort: 30080
    status:
      # port: 8100
      # targetPort: 8100
      nodePort: 30081
  kong:
    domain: "user-provided"
    appSubdomain: "app" # Can be overridden by customer
    apiSubdomain: "api" # Can be overridden by customer
    realtimeSubdomain: "realtime" # Can be overridden by customer

helm-api-service:
  app:
    imagesSupport:
      enabled: false # Can be overridden by customer
      s3ImagesBucket: "" # Can be overridden by customer
      eksRegion: "" # Can be overridden by customer

customerConfig:
  propelauth:
    authURL: "traceloop-provided"
  launchDarkly:
    clientId: "" # OPTIONAL traceloop-provided

customerSecret:
  openai:
    key: "user-provided"
  launchDarkly:
    apiKey: "" # OPTIONAL traceloop-provided
  propelauth:
    verifierKey: "traceloop-provided"
    apiKey: "traceloop-provided"
```

### 6. Update `values-external-postgres.yaml`, `values-external-clickhouse.yaml`, `values-external-kafka.yaml` with relevant addresses
`values-external-postgres.yaml`
```yaml
postgresql:
  enabled: false
  host: ""  # Example: "my-postgres-server.example.com"
  port: ""  # Example: "5432"
  database: ""  # Example: "traceloop"
```

`values-external-clickhouse.yaml`
```yaml
clickhouse:
  enabled: false
  host: ""  # Example: "my-clickhouse-server.example.com"
  port: ""  # Example: "9440"
  httpPort: ""  # Example: "8443"
  database: ""  # Example: "default"
  sslMode: ""  # Example: "strict" or "none"
  sslEnabled: ""  # Example: "true" or "false"
```

`values-external-kafka.yaml`
```yaml
kafka:
  enabled: false
  bootstrapServer: ""  # Example: "my-kafka-broker.example.com:9092"
  securityProtocol: ""  # Example: "SASL_SSL" or "PLAINTEXT"
  saslMechanisms: ""  # Example: "PLAIN" or "SCRAM-SHA-256"
  apiKey: ""  # Your Kafka API key if required
  apiSecret: ""  # Your Kafka API secret if required
```

### 7. Install Traceloop
```bash
## 5. Helm install
helm upgrade --install traceloop . \
  -n traceloop \
  --values values.yaml \
  --values values-customer.yaml \
  --values values-internal-kafka.yaml \
  --values values-internal-clickhouse.yaml \
  --values values-internal-postgres.yaml \
  --values values-temporal.yaml \
  --values values-centrifugo.yaml \
  --create-namespace \
  --dependency-update
```

<Warning>
  For air-gapped environments: 1. Download all required container images 2. Set
  `platform.airgapped: true` 3. Configure private registry settings
</Warning>

## Verification

1. Check all pods are running:

```bash
kubectl get pods -n traceloop
```

2. Verify infrastructure connectivity:

```bash
kubectl logs -n traceloop deployment/traceloop-api
```

3. Access the dashboard at your configured ingress host

## Troubleshooting

- Check our [troubleshooting guide](/self-host/troubleshooting)
- [Schedule support](https://calendly.com/d/cq42-93s-kcx)
- Join our [Slack community](https://traceloop.com/slack)
