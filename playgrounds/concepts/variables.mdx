---
title: "Variables System"
description: "Dynamic variable substitution and column references in playgrounds"
---

# Variables System

The variables system allows columns to reference data from other columns dynamically, enabling powerful data flow and computation patterns across your playground. Variables are the foundation for creating sophisticated workflows and dependencies.

## Basic Variable Syntax

Variables use double curly brace syntax to reference other columns:

```
{{Column Name}}
```

### Simple Example
```
Column A: "Customer Name" → "Alice Johnson"
Column B: "Greeting" → "Hello {{Customer Name}}!"
Result: "Hello Alice Johnson!"
```

### Key Rules
- **Exact Matching**: Variable names must exactly match column names
- **Case Sensitive**: `{{Customer Name}}` ≠ `{{customer name}}`
- **Space Sensitive**: `{{Customer Name}}` ≠ `{{CustomerName}}`
- **Row Context**: Variables resolve to values in the same row

## Variable Resolution

### Resolution Process
1. **Parse**: System identifies `{{...}}` patterns in column content
2. **Validate**: Checks that referenced columns exist
3. **Resolve**: Replaces variables with actual values from the same row
4. **Execute**: Processes the resolved content

### Resolution Timing
Variables are resolved **at execution time**, not when typed:
- Changes to source columns automatically update dependent columns
- Variables show as "outdated" when source data changes
- Fresh resolution occurs each time a cell executes

## Advanced Variable Patterns

### Multiple Variables
Use multiple variables in a single column:
```
Template: "Hello {{First Name}} {{Last Name}}, your order #{{Order Number}} is ready!"

With data:
First Name: "Alice"
Last Name: "Johnson"  
Order Number: "12345"

Result: "Hello Alice Johnson, your order #12345 is ready!"
```

### Nested Variables in Prompts
Complex prompts with multiple data points:
```
You are a {{Role}} helping with {{Task}}.

Customer Profile:
- Name: {{Customer Name}}
- Tier: {{Customer Tier}}
- History: {{Purchase History}}

Previous Interaction: {{Last Conversation}}

Based on this information, {{Instruction}}.
```

### Variables in Code Columns
Reference data in Python code:
```python
customer_name = "{{Customer Name}}"
purchase_amount = {{Purchase Amount}}
tier = "{{Customer Tier}}"

# Calculate discount based on customer tier
if tier == "Premium":
    discount = purchase_amount * 0.15
elif tier == "Gold":
    discount = purchase_amount * 0.10
else:
    discount = purchase_amount * 0.05

return {
    "customer": customer_name,
    "discount": discount,
    "final_amount": purchase_amount - discount
}
```

### Variables in API Calls
Dynamic API requests using variable data:
```json
{
  "method": "POST",
  "url": "https://api.example.com/customers/{{Customer ID}}/orders",
  "headers": {
    "Authorization": "Bearer {{API Token}}",
    "Content-Type": "application/json"
  },
  "body": {
    "product_id": "{{Product ID}}",
    "quantity": {{Quantity}},
    "customer_notes": "{{Special Instructions}}"
  }
}
```

## Data Type Handling

### Text Variables
Text values are inserted as-is:
```
Name: "Alice Johnson"
Template: "Customer: {{Name}}"
Result: "Customer: Alice Johnson"
```

### Numeric Variables
Numbers are inserted without quotes:
```
Price: 29.99
Template: "Total: ${{Price}}"
Result: "Total: $29.99"
```

### JSON Variables
JSON data is serialized when inserted:
```
Metadata: {"tier": "premium", "region": "US"}
Template: "Customer data: {{Metadata}}"
Result: "Customer data: {\"tier\": \"premium\", \"region\": \"US\"}"
```

### Boolean Variables
Booleans are converted to strings:
```
Is Premium: true
Template: "Premium status: {{Is Premium}}"
Result: "Premium status: true"
```

### Null/Empty Values
Empty or null values resolve to empty strings:
```
Middle Name: (empty)
Template: "{{First Name}} {{Middle Name}} {{Last Name}}"
Result: "Alice  Johnson" (note the extra space)
```

## Variable Validation

### Compile-Time Validation
The system validates variables when columns are created or modified:

**Valid References**
- Column exists in the playground
- No circular references detected
- Variable syntax is correct

**Invalid References**
- Column doesn't exist → Error: "Referenced column 'XYZ' not found"
- Circular dependency → Error: "Circular reference detected"
- Malformed syntax → Error: "Invalid variable syntax"

### Runtime Validation
Additional validation occurs during execution:

**Missing Data**
- Source column has no data → Variable resolves to empty string
- Source column execution failed → Dependent column cannot execute

**Type Compatibility**
- Most variables work across all column types
- Some columns may have specific requirements (e.g., numeric columns)

## Common Patterns

### Input → Processing → Output
Classic data pipeline pattern:
```
Raw Data → Data Cleaning → Analysis → Report Generation
    ↓           ↓            ↓           ↓
  Input      Code Col     Prompt Col   Template Col
```

### Prompt Chaining
Sequential prompt processing:
```
Context: "{{Background Information}}"
Step 1: "Based on {{Context}}, analyze the situation."
Step 2: "Given the analysis: {{Step 1}}, provide recommendations."
Step 3: "Summarize the recommendations from {{Step 2}} in bullet points."
```

### Multi-Model Comparison
Compare outputs from different models:
```
Prompt: "Explain quantum computing to a 10-year-old"
GPT-4 Response: {{GPT-4 Column}}
Claude Response: {{Claude Column}}
Comparison: "Compare these explanations: GPT-4: {{GPT-4 Response}}, Claude: {{Claude Response}}"
```

### Dynamic Evaluation
Evaluations that adapt based on context:
```
Evaluation Prompt: "Rate the {{Response Type}} on a scale of 1-10 for {{Evaluation Criteria}}. 
Context: {{Original Context}}
Response: {{Generated Response}}"
```

## Best Practices

### Naming Conventions
- **Descriptive Names**: Use clear, descriptive column names
- **Consistent Style**: Stick to one naming convention (spaces vs underscores)
- **Avoid Conflicts**: Don't use names that might conflict with system keywords
- **Length Limits**: Keep names reasonably short for readability

### Variable Organization
- **Logical Flow**: Organize columns in dependency order
- **Group Related**: Keep related columns close together
- **Document Dependencies**: Use column descriptions to explain relationships
- **Version Control**: Track changes to column relationships

### Error Prevention
- **Validate Early**: Check variable references during column creation
- **Handle Nulls**: Design templates to handle empty values gracefully
- **Test Incrementally**: Test variable resolution with sample data
- **Monitor Dependencies**: Watch for unintended dependency chains

### Performance Optimization
- **Minimize Dependencies**: Avoid unnecessary variable references
- **Cache Results**: Leverage built-in caching for expensive operations
- **Batch Processing**: Group similar variable patterns when possible
- **Resource Limits**: Be mindful of variable resolution costs

## Troubleshooting Variables

### Common Issues

**Variable Not Found**
```
Error: "Referenced column 'Customer_Name' not found"
```
- Check column name spelling (exact match required)
- Verify column exists in the current playground
- Check for special characters or spaces

**Circular References**
```
Error: "Circular reference detected between columns A and B"
```
- Review dependency chain for loops
- Redesign column relationships to eliminate circles
- Use intermediate columns to break cycles

**Empty Variable Resolution**
```
Template: "Hello {{Name}}!" → Result: "Hello !"
```
- Check source column has data
- Verify source column executed successfully
- Consider default values for empty cases

**Type Mismatches**
```
Error: "Cannot use text variable in numeric calculation"
```
- Ensure data types are compatible
- Use code columns for type conversion
- Validate data before using in calculations

### Debugging Tips
- **Preview Mode**: Use column preview to test variable resolution
- **Step-by-Step**: Execute dependencies one at a time
- **Simple Tests**: Start with simple variables before complex patterns
- **Error Messages**: Read error messages carefully for specific guidance

## Next Steps

Master the variables system by exploring:
- [Dependencies](./dependencies) - Managing complex variable relationships  
- [Column Types](../columns/) - How variables work in each column type
- [Execution Model](./execution) - How variables resolve during execution
- [Code Columns](../columns/computation/code) - Advanced variable usage in Python